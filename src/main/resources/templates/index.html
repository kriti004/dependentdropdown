<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.w3.org/1999/xhtml">-->
<!--<head>-->
<!--  <title>Location Selection</title>-->
<!--  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--</head>-->
<!--<body>-->

<!--<h1>Select Location</h1>-->
<!--<form id="locationForm" method="POST">-->
<!--  <label for="country">Country:</label>-->
<!--  <select id="country" name="country">-->
<!--    <option value="">Select Country</option>-->
<!--  </select>-->

<!--  <label for="state">State:</label>-->
<!--  <select id="state" name="state">-->
<!--    <option value="">Select State</option>-->
<!--  </select>-->

<!--  <label for="city">City:</label>-->
<!--  <select id="city" name="city">-->
<!--    <option value="">Select City</option>-->
<!--  </select>-->

<!--  <input type="submit" value="Submit"/>-->
<!--</form>-->

<!--<div id="result" style="margin-top:20px;"></div>-->

<!--<script type="text/javascript">-->
<!--  $(document).ready(function() {-->
<!--      $.getJSON("/api/countries", function(data) {-->
<!--          $.each(data, function(key, entry) {-->
<!--              $('#country').append($('<option></option>').attr('value', entry.id).text(entry.name));-->
<!--          });-->
<!--      });-->

<!--      // Load states based on selected country-->
<!--      $('#country').change(function() {-->
<!--          var countryId = $(this).val();-->
<!--          $('#state').empty().append('<option value="">Select State</option>');-->
<!--          $('#city').empty().append('<option value="">Select City</option>');-->

<!--          if (countryId) {-->
<!--              $.getJSON("/api/state/" + countryId, function(data) {-->
<!--                  $.each(data, function(key, entry) {-->
<!--                      $('#state').append($('<option></option>').attr('value', entry.id).text(entry.name));-->
<!--                  });-->
<!--              });-->
<!--          }-->
<!--      });-->

<!--      // Load cities based on selected state-->
<!--      $('#state').change(function() {-->
<!--          var stateId = $(this).val();-->
<!--          $('#city').empty().append('<option value="">Select City</option>');-->

<!--          if (stateId) {-->
<!--              $.getJSON("/api/city/" + stateId, function(data) {-->
<!--                  $.each(data, function(key, entry) {-->
<!--                      $('#city').append($('<option></option>').attr('value', entry.id).text(entry.name));-->
<!--                  });-->
<!--              });-->
<!--          }-->
<!--      });-->

<!--      $('#locationForm').submit(function(event) {-->
<!--          event.preventDefault();-->
<!--          var selectedCountry = $('#country option:selected').text();-->
<!--          var selectedState = $('#state option:selected').text();-->
<!--          var selectedCity = $('#city option:selected').text();-->


<!--          $.ajax({-->
<!--              type: "POST",-->
<!--              url: "/confirmed",-->
<!--              data: {-->
<!--                  country: selectedCountry,-->
<!--                  state: selectedState,-->
<!--                  city: selectedCity-->
<!--              },-->
<!--              success: function(response) {-->

<!--                  window.location.href = "/confirm";-->
<!--              },-->
<!--              error: function(xhr, status, error) {-->
<!--                  console.error("Error occurred while submitting data:", error);-->
<!--              }-->
<!--          });-->
<!--      });-->
<!--  });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.w3.org/1999/xhtml">-->
<!--<head>-->
<!--  <title>Location Selection</title>-->
<!--  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--</head>-->
<!--<body>-->

<!--<h1>Select Location</h1>-->
<!--<form id="locationForm" th:object="${form}" method="POST">-->
<!--  <label for="country">Country:</label>-->
<!--  <select id="country" name="country" required>-->
<!--    <option value="">Select Country</option>-->
<!--  </select>-->

<!--  <label for="state">State:</label>-->
<!--  <select id="state" name="state" required>-->
<!--    <option value="">Select State</option>-->
<!--  </select>-->

<!--  <label for="city">City:</label>-->
<!--  <select id="city" name="city" required>-->
<!--    <option value="">Select City</option>-->
<!--  </select>-->

<!--  <input type="submit" value="Submit"/>-->
<!--</form>-->

<!--<div id="result" style="margin-top:20px;"></div>-->

<!--<script type="text/javascript">-->
<!--  $(document).ready(function() {-->
<!--      // Load countries-->
<!--      $.getJSON("/api/countries", function(data) {-->
<!--          $.each(data, function(key, entry) {-->
<!--              $('#country').append($('<option></option>').attr('value', entry.id).text(entry.name));-->
<!--          });-->
<!--      });-->

<!--      // Load states based on selected country-->
<!--      $('#country').change(function() {-->
<!--          var countryId = $(this).val();-->
<!--          $('#state').empty().append('<option value="">Select State</option>');-->
<!--          $('#city').empty().append('<option value="">Select City</option>');-->

<!--          if (countryId) {-->
<!--              $.getJSON("/api/state/" + countryId, function(data) {-->
<!--                  $.each(data, function(key, entry) {-->
<!--                      $('#state').append($('<option></option>').attr('value', entry.id).text(entry.name));-->
<!--                  });-->
<!--              });-->
<!--          }-->
<!--      });-->

<!--      // Load cities based on selected state-->
<!--      $('#state').change(function() {-->
<!--          var stateId = $(this).val();-->
<!--          $('#city').empty().append('<option value="">Select City</option>');-->

<!--          if (stateId) {-->
<!--              $.getJSON("/api/city/" + stateId, function(data) {-->
<!--                  $.each(data, function(key, entry) {-->
<!--                      $('#city').append($('<option></option>').attr('value', entry.id).text(entry.name));-->
<!--                  });-->
<!--              });-->
<!--          }-->
<!--      });-->

<!--&lt;!&ndash;      // Handle form submission&ndash;&gt;-->
<!--&lt;!&ndash;      $('#locationForm').submit(function(event) {&ndash;&gt;-->
<!--&lt;!&ndash;          event.preventDefault(); // Prevent the default form submission&ndash;&gt;-->

<!--&lt;!&ndash;          var selectedCountry = $('#country option:selected').text();&ndash;&gt;-->
<!--&lt;!&ndash;          var selectedState = $('#state option:selected').text();&ndash;&gt;-->
<!--&lt;!&ndash;          var selectedCity = $('#city option:selected').text();&ndash;&gt;-->

<!--&lt;!&ndash;          // Send data to the server using AJAX&ndash;&gt;-->
<!--&lt;!&ndash;          $.ajax({&ndash;&gt;-->
<!--&lt;!&ndash;              type: "POST",&ndash;&gt;-->
<!--&lt;!&ndash;              url: "/confirmed",&ndash;&gt;-->
<!--&lt;!&ndash;              data: {&ndash;&gt;-->
<!--&lt;!&ndash;                  country: selectedCountry,&ndash;&gt;-->
<!--&lt;!&ndash;                  state: selectedState,&ndash;&gt;-->
<!--&lt;!&ndash;                  city: selectedCity&ndash;&gt;-->
<!--&lt;!&ndash;              },&ndash;&gt;-->
<!--&lt;!&ndash;              success: function(response) {&ndash;&gt;-->
<!--&lt;!&ndash;                  window.location.href = "/confirm";&ndash;&gt;-->
<!--&lt;!&ndash;              },&ndash;&gt;-->
<!--&lt;!&ndash;              error: function(xhr, status, error) {&ndash;&gt;-->
<!--&lt;!&ndash;                  console.error("Error occurred while submitting data:", error);&ndash;&gt;-->
<!--&lt;!&ndash;              }&ndash;&gt;-->
<!--&lt;!&ndash;          });&ndash;&gt;-->
<!--&lt;!&ndash;      });&ndash;&gt;-->
<!--&lt;!&ndash;  });&ndash;&gt;-->
<!--</script>-->

<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <title>Location Selection</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<h1>Select Location</h1>
<form th:action="@{/confirmed}" th:object="${formData}" method="POST">
  <label for="username">Enter the username:</label>
  <br>
  <input type = "text" id = "username" name ="username"/>
  <br><br>
  <label for="country">Country:</label>
  <br>
  <select id="country" name="countryId" required>
    <option value="" >Select Country</option>
  </select>
  <br><br>
  <label for="state">State:</label>
  <br>
  <select id="state" name="stateId"  required>
    <option value="">Select State</option>
  </select>
  <br><br>
  <label for="city">City:</label>
  <br>
  <select id="city" name="cityId"  required>
    <option value="">Select City</option>
  </select>
  <br><br>
  <input type="submit" value="Submit"/>
</form>

<script type="text/javascript">
  $(document).ready(function() {
      $.getJSON("/api/countries", function(data) {
          $.each(data, function(key, entry) {
              $('#country').append($('<option></option>').attr('value', entry.id).text(entry.name));
          });
      });

      $('#country').change(function() {
          var countryId = $(this).val();
          $('#state').empty().append('<option value="">Select State</option>');
          $('#city').empty().append('<option value="">Select City</option>');

          if (countryId) {
              $.getJSON("/api/state/" + countryId, function(data) {
                  $.each(data, function(key, entry) {
                      $('#state').append($('<option></option>').attr('value', entry.id).text(entry.name));
                  });
              });
          }
      });

      $('#state').change(function() {
          var stateId = $(this).val();
          $('#city').empty().append('<option value="">Select City</option>');

          if (stateId) {
              $.getJSON("/api/city/" + stateId, function(data) {
                  $.each(data, function(key, entry) {
                      $('#city').append($('<option></option>').attr('value', entry.id).text(entry.name));
                  });
              });
          }
      });
  });
</script>

</body>
</html>
